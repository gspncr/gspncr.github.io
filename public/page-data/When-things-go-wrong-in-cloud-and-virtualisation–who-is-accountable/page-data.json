{"componentChunkName":"component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js","path":"/When-things-go-wrong-in-cloud-and-virtualisation–who-is-accountable/","result":{"data":{"site":{"siteMetadata":{"title":"Gary Spencers Blog","social":[{"name":"twitter","url":"https://twitter.com/gspncr"},{"name":"github","url":"https://github.com/gspncr"}]}},"blogPost":{"__typename":"MdxBlogPost","id":"d8bd2f2c-9147-5f1a-8b4d-828b27cbb3d5","excerpt":"In days gone by when you have utilisation problems in your hosted application you might typically throw more hardware at the problem…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"When things go wrong in cloud and virtualisation – who is accountable?\",\n  \"date\": \"2017-08-13T00:00:00.000Z\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"In days gone by when you have utilisation problems in your hosted application you might typically throw more hardware at the problem \\u2014 delaying the problem. That was in the old age of performance, now APM is more widespread people have looked to solving problems for performance \\u2013saving on throwing more hardware at the problem.\"), mdx(\"p\", null, \"In the cloud, and the new stack of technologies, there exists scalability. Typically running smaller hosts, easily destructible and easy to scale new instances. Well, those inefficiencies may still exist \\u2013 then what, scale up more?\"), mdx(\"p\", null, \"Moreover, the bedrock of your application in a public cloud \\u2013 you do not know how committed your utilised resources might be. This is a predicament I found myself in with this blog. My stack is a simple one: CentOS hosting docker running Apache, WordPress (PHP) and MySQL; hosted on DigitalOcean with a 1GB Droplet.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u201CWhy Dockerise something so simple, though?\"), \"\\nKnew you might ask this. Well, actually, it isn\\u2019t for performance or DevOps or even to be cool. I wanted to get more exposure to Docker and a blog seemed an ok environment to do it in. My homepage site is hosted in S3 since there\\u2019s nothing dynamic about it so does not need any compute (or the overhead of any dynamic language).\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1248px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"35.65217391304348%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABTklEQVQoz4WOy0rDQBiF8xxSL61WBEUX4suIIEXQhfgMgg/gG7jyadReYl101UWtNLU0aZpMMpnJ5XhmVHBRcODj/5mZc3Gujk9w0dxDa2sbrfoOzrcaOKttko2VnK6t465Vw+N9Ew+3dVzuNnFzcER9A9f7h3BE10XS6SLruZCdHlLuknfK7UO/ruINst2HeHIhnl1E7R7Clw5iauN2F06QplgqhTjXCO3MEaQJcvx/KhKTJYlIRpzpdApvMsEyDOHP50iEQCYlyqJASfNiBfaNoCzpStvqe5o3x/M8TGgoaLRYLCBlatMV2xYUVfxYUvgXrbWduQkw5ubeGHJ35mxliKIIIVtmWQbNj8PhEL7vW7EiWuc0KKzJYDDAaDTCePzB+U7d0ha1hp+zGWbEGAZBwIbSkqYSKlM2WYkEMd9FkiAhJtgE/Yabvfpp+AX2Ae7u58HRPAAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"dt1\",\n    \"title\": \"dt1\",\n    \"src\": \"/static/b944ea468d6281a48a482a44905d8d6c/5a791/dt1.png\",\n    \"srcSet\": [\"/static/b944ea468d6281a48a482a44905d8d6c/e4d6b/dt1.png 345w\", \"/static/b944ea468d6281a48a482a44905d8d6c/1e043/dt1.png 690w\", \"/static/b944ea468d6281a48a482a44905d8d6c/5a791/dt1.png 1248w\"],\n    \"sizes\": \"(max-width: 1248px) 100vw, 1248px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \"), \"\\nLook at all of those problems! For a WordPress blog, this should not be the case!\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1243px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"50.724637681159415%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4ElEQVQoz42RO28TQRDH7/NQgRQpAsmSAygQOIERcklBR0GZji+Qgm9BQYNAgGgoaAAFJ4EUFAbZjvDrHjbn83GP3dvXn7n1A1PBnH67s7M7/9uZdS5vubhxqYnd7Tu4WWvi6lYD9fMudoj6kp0VF1zUzrm4/3APB08bePykgVtXGrhdu4fr23exd7EJ58ObUxy//Ua0cfYlwNnJFJ1WgO5RaP3e8cT6a1oVPjpHY8JD51OA74eezalw/MkYpWLgsoCib9OEZjT+HfuXOYP+AEJIu+BZhiLLYbSBKAXCIEQyT6CVgVIamuKKcag0hZISmvK0VAuqfcIJ/AB5CES9AqNHB4hPfUSfx0h8IPUWJCNiqJEEdO5jF5PXh4jaMwwe7KNX30X3mov+q3dIY7phGIagasFigfTkK4qIkS/BEo1irpCTn0WcZmHXLFHgqQH7ZZC8byF+9hzxi5eYd/sQnAQ9zwMrORgvUBUulICQJcHtnBc50tlPZGmCNEvBBVvvy2WHKySMjTvj0RAsS0idUe8WfdD6D1U/DSUYYyx644wSArIsF1A/FfXS+TEK0Q4Vppm2glgmr6xyV2Kb8cokPQznVAkJs+Xs9OiVW50ZhtOc/lKuBf+H6paVqBVXylbyG0ZP1BIWLkdMAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"dt2\",\n    \"title\": \"dt2\",\n    \"src\": \"/static/1981bd21300fe2dd879eb6f3916a7b14/d93d9/dt2.png\",\n    \"srcSet\": [\"/static/1981bd21300fe2dd879eb6f3916a7b14/e4d6b/dt2.png 345w\", \"/static/1981bd21300fe2dd879eb6f3916a7b14/1e043/dt2.png 690w\", \"/static/1981bd21300fe2dd879eb6f3916a7b14/d93d9/dt2.png 1243w\"],\n    \"sizes\": \"(max-width: 1243px) 100vw, 1243px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \"), \"\\n\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"What was the problem?\")), mdx(\"p\", null, \"Saturation. Resources in my host became over utilised. The problem is 2-fold, on the one hand I am running my processes in a docker container, and that docker container is running in a Virtual Machine.\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1237px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"50.724637681159415%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABp0lEQVQoz22QuU7DQBCG/ToQzKUUdIjHoeIqQKKjhJY3gCBxvEFKmjQJicMNAqGIKpd3vT7i62dmEnOIWPrl3Tm+mX+t3dU1bNuL2CrZE81jd6mMzdk50cbMb5WwXVrC8bqNy6MFnB/Y2CsvYr+8gh17AXvLZVjh4xPC+wdR/PQMt9nCxeERVMuBorNutSWXPL8AnU9cn5yidnYF1bhHrzbORw+PlH8F3t5huWEANwxFKoqgRxEad7foG0/uJkkQZBki5MgAvHY6eOl8wKQx/DRBmGdIKB7mOVL6W8p1wdIkdzhEmnAaEvONgfE8xKORxEBN/EU0XCuFgPJcU8SzNIWltQZLUYFHzQOCVqvV77vxDIIgQEiQnBrr9TpuyUEQ+NJnCBiRE86n04DDCbDX6wmc777vSxMDb5pNOI4j9YPBAC45YRjn/wBZnOQgf/1+X6bzkGTyDGPXmYBYnjfuywvL9NZ/NizOTrtNWxkBstgyQ3kYNxWAnyG56B+Qm7tktVKpoNvtil2ltABZbGsaaOqGhWXeJI5jAWrZWgmIi3nDQnz/DS2AX3fh1ScPij6GAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"dt3\",\n    \"title\": \"dt3\",\n    \"src\": \"/static/cd963d74385aeb103f49d778710beaf5/b5dee/dt3.png\",\n    \"srcSet\": [\"/static/cd963d74385aeb103f49d778710beaf5/e4d6b/dt3.png 345w\", \"/static/cd963d74385aeb103f49d778710beaf5/1e043/dt3.png 690w\", \"/static/cd963d74385aeb103f49d778710beaf5/b5dee/dt3.png 1237w\"],\n    \"sizes\": \"(max-width: 1237px) 100vw, 1237px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \"), \"\\nI encountered this problem quite often. In the first days of me dockerising my blog, I did also have phpMyAdmin running too but encountered vast amounts of saturation. It is also worth considering it is not great practice to have so many processes running in one container, I had no failover or swarm plans, and in my case adding docker was just another layer of virtualisation.\"), mdx(\"p\", null, \"I could expand the memory on the instance to solve this. I could set about not using containers. I could consider looking at optimising my running processes.\"), mdx(\"p\", null, \"I \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"could\"), \" do many things.\"), mdx(\"p\", null, \"On the 5th July, I get an email from DO confirming there had been issues on my physical node.\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"777px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"4.057971014492754%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAARElEQVQI1yWLOw6AIBTAvP8JBXk/xERGRqYKsUmTLj1MBFnq0lTJOVHvytMaKZ2oGhGBhyPl+tv2U3h7ZzPGwD2Yc/IBbRhJGShW34MAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"dt4\",\n    \"title\": \"dt4\",\n    \"src\": \"/static/28117a742ba548cbb90451b12ac5e80b/108f8/dt4.png\",\n    \"srcSet\": [\"/static/28117a742ba548cbb90451b12ac5e80b/e4d6b/dt4.png 345w\", \"/static/28117a742ba548cbb90451b12ac5e80b/1e043/dt4.png 690w\", \"/static/28117a742ba548cbb90451b12ac5e80b/108f8/dt4.png 777w\"],\n    \"sizes\": \"(max-width: 777px) 100vw, 777px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \"), \"\\nNot bad. I could have acted on this quicker, and \\u2013 so far \\u2013 it looks like it was some configuration on my DO node since the saturation has not returned. So far, so good!\"), mdx(\"p\", null, \"In my instance, it actually looks to be my stack may be causing spikes (not huge), where I am causing CPU steal or memory steal. The DO VM will allow me to burst but not hold the burst (fair is fair) and later my processes become saturated.\\n\", mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1233px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"49.85507246376811%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2UlEQVQoz32RS2sUQRDH50t4yNEnxqs3wcNqWBEVRBQUQ8iC6EEQRe9+rlwEPYhZY0QTgt6EkM1mZ3Zn59U9M90zP6t71uADLPjzr3dVVwc3bt6i3+/T61/nfH+NcyurnOrd50zvASevPOT0tQFLV9dZWhlw4vI6l16vMdh4yuONJ1x89JzlO69YvvuCs7efceHeS4JotE88FkQTvkeGr5OGnQh2w5YvIezM4XMM2zP4NIWtCWwewocRDEXfijp8lNz3I0uweVDx5kfJUBy7UwO1QmcxVZ6ALbEqpcpmNMJYLXZCncuEuljEE0whU432ucG2THkn094etAzHBqUV8TwhSTPKsiLNcsJoSiysvZ35eK5kcFn6PAelSx8LoEFGCVr+FucpJTne+0Y6iXzm/yTPcwLbNL57obSH1h2nskEoW8WzGDM+wkpjl2ut/Rfib9u2a+gU1yTPM+8ohOfumfKsQ8EsnqPCSE6maKSwaWwHaztbuP2zYbdhWmiSXHmeZ4ooLTgShHFKEs5IhIuyRgl0ZShrI1x7rgTHDX/dSmyMmyZsrduk9XpV177ADXVFLubY1binOmkW7BtWVYUxZvELbZf8G5zPxWtp7MTpShX+TN2pcrHVsf4TQI/fqEaysVQAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"dt5\",\n    \"title\": \"dt5\",\n    \"src\": \"/static/569b678569d55dba53d9faa6858db110/b0aa6/dt5.png\",\n    \"srcSet\": [\"/static/569b678569d55dba53d9faa6858db110/e4d6b/dt5.png 345w\", \"/static/569b678569d55dba53d9faa6858db110/1e043/dt5.png 690w\", \"/static/569b678569d55dba53d9faa6858db110/b0aa6/dt5.png 1233w\"],\n    \"sizes\": \"(max-width: 1233px) 100vw, 1233px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \"), \"\\n\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Next Steps\")), mdx(\"p\", null, \"In true NoOps style, it would be worthwhile automating the recycling of my docker instance. This is all very possible with configuration management tools out there, in combination with dynatrace to notify the config manager when there is a problem I can have a totally hands off process for handling this issue!\"));\n}\n;\nMDXContent.isMDXComponent = true;","slug":"/When-things-go-wrong-in-cloud-and-virtualisation–who-is-accountable/","title":"When things go wrong in cloud and virtualisation – who is accountable?","tags":[],"date":"August 13, 2017","image":null,"imageAlt":null,"imageCaptionText":null,"imageCaptionLink":null,"socialImage":null},"previous":{"__typename":"MdxBlogPost","id":"53be20a1-8b30-5fd0-b5e2-b884ddd52036","excerpt":"I have been working on a lab I will be delivering at one of my client sites based around W3C Navigation Timings and specifically using the…","slug":"/W3C-Navigation-Timings-in-Dynatrace/","title":"W3C Navigation Timings in Dynatrace","date":"July 07, 2017"},"next":{"__typename":"MdxBlogPost","id":"7f139c23-97b4-5458-a67f-d04576c10e06","excerpt":"We started using Microsoft Teams at work. A friend that works at Microsoft told me a cool way to access MS Teams, using  http://slack.fail…","slug":"/Monitoring-the-Thameslink-Failway/","title":"Monitoring the Thameslink Failway","date":"January 06, 2018"}},"pageContext":{"id":"d8bd2f2c-9147-5f1a-8b4d-828b27cbb3d5","previousId":"53be20a1-8b30-5fd0-b5e2-b884ddd52036","nextId":"7f139c23-97b4-5458-a67f-d04576c10e06","maxWidth":1380}},"staticQueryHashes":["2744905544","3090755652","386998304","764694655"]}